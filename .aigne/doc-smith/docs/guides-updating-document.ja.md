# コンテンツの更新

ドキュメントの簡単な変更や全面的な見直しが必要ですか？このガイドでは、`update` コマンドを使用して既存のドキュメントを修正する方法について説明します。新しいフィードバックの取り込み、コードの変更の反映、あるいはゼロからの再作成など、様々な状況に対応できます。このツールは、ガイド付きで変更を行うためのインタラクティブモードと、コマンドラインで素早く更新するためのダイレクトモードの両方を提供します。

## インタラクティブな更新

ガイド付きの操作を行いたい場合は、引数なしで `update` コマンドを実行します。これによりインタラクティブセッションが開始され、変更したいドキュメントを選択して指示を与えることができます。

1.  インタラクティブな更新プロセスを開始します：
    ```bash aigne doc update icon=lucide:terminal
    aigne doc update
    ```
2.  プロジェクトのドキュメントのリストが表示されます。矢印キーで移動し、スペースバーで1つまたは複数のファイルを選択し、`Enter` キーで選択を確定します。

    ![ユーザーがリストから更新するドキュメントを選択できるインタラクティブなプロンプトを示すスクリーンショット。](../../../assets/screenshots/doc-update.png)

その後のプロセスは、単一のドキュメントを選択したか、複数のドキュメントを選択したかによって異なります。

### 単一ドキュメントの改良

1つのドキュメントを選択すると、精密な調整を行うための反復的な改良ループに入ります。以下の選択肢が表示されます：

*   **View document**: ドキュメントの現在のバージョンのコンテンツをターミナルに直接表示します。
*   **Give feedback**: 変更内容を説明するテキストの入力を求められます。例えば、「技術者でないユーザー向けに導入部を簡潔にしてください」や「認証関数のコード例を追加してください」などです。
*   **Done**: 改良ループを終了し、ドキュメントの最新バージョンを保存します。

フィードバックを送信すると、ツールはドキュメントのコンテンツを再生成します。その後、新しいバージョンを表示してさらにフィードバックを提供し、結果に満足するまでこのサイクルを繰り返すことができます。

### 複数ドキュメントの一括更新

2つ以上のドキュメントを選択した場合、ツールは一括更新を実行します。単一の指示またはフィードバックの提供を求められます。このフィードバックは、選択されたすべてのドキュメントに同時に適用されます。この方法は、ドキュメント全体で一貫した変更を行う場合、例えば、繰り返し現れるセクションの更新や用語の標準化などに効率的です。

## コマンドラインフラグを使用した直接更新

必要な変更がすでに分かっている場合は、コマンドラインフラグを使用してドキュメントを直接更新し、インタラクティブなプロンプトを省略することができます。

### 特定のフィードバックの適用

1つまたは複数のドキュメントにフィードバックを適用するには、`--docs` と `--feedback` フラグを使用します。`--docs` フラグはファイルパスを指定し、`--feedback` は更新のための指示を提供します。

```bash 単一ドキュメントの更新 icon=lucide:terminal
aigne doc update --docs /overview --feedback "コア機能についてより詳細な説明を追加してください。"
```

`--docs` フラグを複数回指定することで、1つのコマンドで複数のドキュメントに同じフィードバックを適用できます。

```bash 複数ドキュメントの更新 icon=lucide:terminal
aigne doc update --docs /overview --docs /getting-started --feedback "両方のドキュメントでトーンが一貫していることを確認してください。"
```

### ドキュメントのリセット

ドキュメントの現在のバージョンを破棄し、ソースコードから再生成するには、`--reset` フラグを使用します。このアクションは、ツールに既存のコンテンツを無視して、ドキュメントをゼロから作成するよう指示します。

```bash ドキュメントのリセット icon=lucide:terminal
aigne doc update --docs /overview --reset
```

これは、プロジェクトのコードベースに大幅な変更があったためにドキュメントが著しく古くなった場合に特に便利です。

## ドキュメントの追加と削除

`update` コマンドは既存のコンテンツを修正しますが、新しいドキュメントを追加したり、不要になったドキュメントを削除したりする必要がある場合もあります。これらのタスクのために、DocSmith は専用のコマンドを提供しています：

*   **新しいドキュメントを追加する場合**は、[ドキュメントの追加](./guides-adding-a-document.md)ガイドを参照してください。
*   **既存のドキュメントを削除する場合**は、[ドキュメントの削除](./guides-removing-a-document.md)ガイドを参照してください。
## コマンドパラメータ

`update` コマンドは、その動作を制御するためにいくつかのパラメータを受け入れます。利用可能なオプションの概要は以下の通りです：

| パラメータ | 説明 | 必須 |
| :--- | :--- | :--- |
| `--docs` | 更新するドキュメントのパスを指定します。複数回使用できます。 | オプション |
| `--feedback` | 指定されたドキュメントに行う変更についてのテキスト指示を提供します。 | オプション |
| `--reset` | このブール値フラグが存在する場合、既存のコンテンツを無視してドキュメントをゼロから再作成します。 | オプション |
| `--glossary` | 用語の一貫性を確保するために、用語集ファイル（`@/path/to/glossary.md`）へのパスを指定します。 | オプション |
| `--diagram` | 図表（D2 コードブロック、プレースホルダー、または図表画像）を含むドキュメントのみを表示し、ユーザーが更新するものを選択できるようにします。 | オプション |
| `--diagram-all` | 図表（D2 コードブロック、プレースホルダー、または図表画像）を含むすべてのドキュメントを自動選択し、ユーザー選択なしで更新します。 | オプション |

---

`update`、`add-document`、`remove-document` コマンドを使用することで、ドキュメントの完全なライフサイクルを管理し、プロジェクトの開発と整合性を保つことができます。ドキュメントを初めて作成する方法については、[ドキュメントの作成](./guides-generating-documentation.md)ガイドを参照してください。

# 发布文档

当您的文档创建后，最后一步是将其发布到线上。本文档将提供一个分步指南，指导您如何使用 `aigne doc publish` 命令来发布文档，使其可供您的受众访问。

## 发布命令

`aigne doc publish` 命令会将您创建的文档文件上传到一个 Web 服务，让用户可以在 Web 浏览器中查看它们。为了提高效率，您可以使用主命令或其更短的别名。

```bash 命令别名 icon=lucide:terminal
# 完整命令
aigne doc publish

# 短别名
aigne doc pub

# 更短的别名
aigne doc p
```

首次执行此命令将启动一个交互式设置过程，引导您为文档选择一个发布平台。

![命令行界面提示用户选择发布平台的截图。](../assets/screenshots/doc-publish.png)

## 发布选项

该工具提供了多个托管文档的目标位置。在交互式设置过程中，您将看到以下选项。

### 1. DocSmith Cloud（免费托管）

此选项将您的文档发布到 `docsmith.aigne.io`，这是由 AIGNE 提供的免费公共托管服务。

*   **最适用于**：开源项目、个人作品集或任何旨在公开访问的文档。
*   **费用**：免费。
*   **结果**：您的文档将被托管在一个公共 URL 上，该 URL 会在发布成功后提供。

### 2. 您现有的网站（自托管）

此选项允许您将文档发布到您已经拥有和运营的网站。这需要您运行自己的 Discuss Kit 实例，它为文档站点提供了必要的后端和前端组件。

*   **最适用于**：将文档直接集成到现有的公司网站、产品门户或个人域名中，以实现完全控制。
*   **要求**：您必须拥有自己的托管环境。
*   **流程**：
    1.  在提示中选择“您现有的网站”选项。
    2.  输入您网站的完整 URL（例如，`https://docs.your-company.com`）。
    3.  要建立您自己的文档网站，您可以从官方商店获取 Discuss Kit 实例：[https://www.web3kit.rocks/discuss-kit](https://www.web3kit.rocks/discuss-kit)。

### 3. 新网站（付费服务）

此选项通过引导流程帮助您为文档建立一个新的专用网站。

*   **最适用于**：需要一个专业的、独立的文档门户而又不想自己管理设置的用户。
*   **费用**：这是一项付费服务。
*   **流程**：命令行工具将引导您完成部署和配置一个新的、受管理的 Discuss Kit 实例所需的步骤。如果您之前已开始此过程，系统将提供一个恢复设置的选项。

## CI/CD 自动化发布

在持续集成/持续部署（CI/CD）等自动化环境中，您可以通过使用 `--appUrl` 标志直接指定目标 URL 来绕过交互式提示。

```bash 直接发布 icon=lucide:terminal
aigne doc publish --appUrl https://your-docs-website.com
```

当您首次发布到特定 URL 时，无论是通过交互式提示还是通过 `--appUrl` 标志，该工具都会将此 URL 保存到您的本地配置文件中。后续运行 `aigne doc publish` 时将自动使用已保存的 URL，从而简化更新过程。

## 问题排查

### 授权错误（401/403）

如果发布过程失败，并出现包含“401”或“403”的错误消息，这通常表示您的身份验证令牌存在问题。该令牌可能无效、已过期，或者缺少对指定文档看板的必要权限。

要解决此问题，您可以使用 `clear` 命令重置本地的身份验证凭据。

```bash 清除配置 icon=lucide:terminal
aigne doc clear
```

此命令将提示您选择要删除哪些配置数据。选择清除身份验证令牌。之后，再次运行 `aigne doc publish`。系统将提示您重新进行身份验证，这将生成一个新的有效令牌，从而让发布得以继续。

---

成功发布文档后，您需要随着项目的演进不断更新文档。请参阅[更新文档](./guides-updating-documentation.md)指南，了解如何修改现有文档的说明。
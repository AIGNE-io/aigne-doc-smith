# 更新文档

维护文档的准确性和相关性是一个持续的过程。随着代码库的演进或收到新的反馈，您将需要修改现有文档。`update` 命令提供了一种结构化的方式，可以用新的指令重新生成特定文档，确保其保持最新。

本指南将解释更新文档的两种主要方法：用于对单个文档进行详细优化的交互模式，以及用于一次性将变更应用于多个文档的批处理模式。

## 两种操作模式

`update` 命令根据您选择的文档数量和提供的选项，在两种模式之一中运行。

1.  **交互模式**：当您更新单个文档且未使用 `--reset` 标志时触发。此模式专为迭代优化而设计，允许您提供反馈、审查变更并重复此过程，直到文档符合您的标准。
2.  **批处理模式**：当您同时更新多个文档或使用 `--reset` 标志时使用。此模式会在单次操作中将您的反馈应用于所有选定的文档，对于大范围的变更非常高效。

## 交互模式：优化单个文档

交互模式提供了一个受控的环境，可以对单个文档进行精确的更改。当您需要根据特定反馈仔细审查和调整内容时，这是理想的选择。

要启动交互会话，请运行 `aigne doc update` 命令并从列表中选择单个文档。

```bash
aigne doc update
```

该工具将引导您完成以下步骤：

1.  **文档分析**：系统首先会显示所选文档的结构大纲，展示其主要标题。
2.  **用户操作**：然后系统会提示您选择以下三种操作之一：
    *   **查看文档**：显示当前版本文档的全部内容，并在您的终端中渲染以便于阅读。
    *   **提供反馈**：提示您输入修改请求。这可以是任何内容，从“添加一个关于错误处理的部分”到“阐明 `config` 对象的用途”。
    *   **完成**：退出交互会话并保存最后生成的文档版本。
3.  **内容重新生成**：在您提交反馈后，AI 会根据您的指令重新生成文档内容。然后会显示新的标题结构。
4.  **迭代或完成**：您可以继续这个查看、提供反馈和重新生成的循环，直到您对结果满意为止。一旦选择“完成”，该过程即告结束。

这种迭代循环可以对最终输出进行微调控制，确保更新后的文档准确而完整。

## 批处理模式：更新多个文档

批处理模式专为提高效率而设计，适用于需要将相同的通用反馈应用于多个文档或完全重新生成它们的情况。如果您选择多个文档或使用 `--docs` 或 `--reset` 等命令行标志，此模式将自动激活。

### 使用特定反馈进行更新

您可以直接从命令行提供反馈来更新一个或多个文档，而无需进入交互会话。

```bash title="使用反馈更新单个文档"
aigne doc update --docs overview.md --feedback "Add a section explaining the authentication flow"
```

```bash title="使用相同的反馈更新多个文档"
aigne doc update --docs overview.md --docs guides-getting-started.md --feedback "Improve the clarity of all code examples"
```

### 重置和重新生成

`--reset` 标志指示工具忽略文档的先前版本，并根据源代码从头开始重新生成它们。当代码中的重大变更使现有文档过时时，这非常有用。

```bash title="从头开始重新生成特定文档"
aigne doc update --docs overview.md --reset
```

## 命令参考

`update` 命令接受几个标志来控制其行为。

| Parameter | Description | Example |
| :--- | :--- | :--- |
| `--docs <path>` | 指定要更新的一个或多个文档路径。可多次使用。 | `--docs overview.md --docs guides-generating-documentation.md` |
| `--feedback <text>` | 提供有关内容变更的指令。 | `--feedback "Add more detail to the installation steps"` |
| `--glossary <file>` | 指定一个术语表文件，以确保在重新生成期间术语的一致性。 | `--glossary @/path/to/glossary.md` |
| `--reset` | 一个布尔标志，强制完全重新生成所选文档，忽略其先前版本。 | `--reset` |

## 总结

`update` 命令提供了一个灵活的工作流，可让您的文档与项目保持一致。使用交互模式对单个文档进行详细的迭代更改，使用批处理模式高效地将广泛的更新应用于多个文件。

有关相关任务，请参阅以下指南：
- [生成文档](./guides-generating-documentation.md)
- [翻译文档](./guides-translating-documentation.md)
# 更新文档

维护文档的准确性和相关性是一个持续的过程。随着代码库的演进或收到新的反馈，你需要修改现有文档。`update` 命令提供了一种结构化的方式，用新的指令重新生成特定文档，确保其内容保持最新。

本指南将介绍更新文档的两种主要方法：用于单个文档详细优化的交互模式，以及用于一次性将变更应用于多个文档的批量模式。

## 两种操作模式

`update` 命令根据你选择的文档数量和你提供的选项，在两种模式之一中运行。

1.  **交互模式**：当你在不使用 `--reset` 标志的情况下更新单个文档时触发。此模式专为迭代优化而设计，允许你提供反馈、审查变更，并重复此过程，直到文档符合你的标准。
2.  **批量模式**：当你同时更新多个文档或使用 `--reset` 标志时使用。此模式在单次操作中将你的反馈应用于所有选定的文档，对于大范围的变更而言非常高效。

## 交互模式：优化单个文档

交互模式为对单个文档进行精确变更提供了一个受控的环境。当你需要根据特定反馈仔细审查和调整内容时，这是理想的选择。

要启动交互式会话，请运行 `aigne doc update` 命令并从列表中选择单个文档。

```bash
aigne doc update
```

该工具将引导你完成以下步骤：

1.  **文档分析**：系统首先会显示所选文档的结构大纲，展示其主要标题。
2.  **用户操作**：然后系统会提示你选择以下三个操作之一：
    *   **查看文档**：显示当前版本文档的全部内容，并在你的终端中渲染以便于阅读。
    *   **提供反馈**：提示你输入修改请求。这可以是任何内容，从“添加一个关于错误处理的部分”到“阐明 `config` 对象的用途”。
    *   **完成**：退出交互式会话并保存最后生成的文档版本。
3.  **内容重新生成**：在你提交反馈后，AI 会根据你的指令重新生成文档内容。然后会显示新的标题结构。
4.  **迭代或完成**：你可以继续这个查看、提供反馈和重新生成的循环，直到你对结果满意为止。一旦选择“完成”，该过程即告结束。

这个迭代周期可以让你对最终输出进行精细控制，确保更新后的文档准确而完整。

## 批量模式：更新多个文档

当你需要将相同的通用反馈应用于多个文档或完全重新生成它们时，批量模式旨在提高效率。如果你选择多个文档或使用如 `--docs` 或 `--reset` 之类的命令行标志，此模式会自动激活。

### 使用特定反馈进行更新

你可以直接从命令行提供反馈来更新一个或多个文档，而无需进入交互式会话。

```bash title="使用反馈更新单个文档"
aigne doc update --docs /guides/overview.md --feedback "Add a section explaining the authentication flow"
```

```bash title="使用相同的反馈更新多个文档"
aigne doc update --docs /guides/overview.md --docs /guides/getting-started.md --feedback "Improve the clarity of all code examples"
```

### 重置与重新生成

`--reset` 标志指示工具忽略文档的先前版本，并根据源代码从头开始重新生成它们。当代码中的重大变更使现有文档过时时，这非常有用。

```bash title="从头开始重新生成特定文档"
aigne doc update --docs /guides/overview.md --reset
```

## 命令参考

`update` 命令接受多个标志来控制其行为。

| Parameter | Description | Example |
| :--- | :--- | :--- |
| `--docs <path>` | 指定要更新的一个或多个文档路径。可多次使用。 | `--docs /overview --docs /guides/generating-documentation` |
| `--feedback <text>` | 提供有关内容变更的指令。 | `--feedback "为安装步骤添加更多细节"` |
| `--glossary <file>` | 指定一个术语表文件，以确保在重新生成期间术语的一致性。 | `--glossary @/path/to/glossary.md` |
| `--reset` | 一个布尔标志，强制完全重新生成所选文档，忽略其先前版本。 | `--reset` |

## 总结

`update` 命令提供了一个灵活的工作流，可让你的文档与项目保持一致。使用交互模式对单个文档进行详细的迭代变更，使用批量模式高效地将广泛的更新应用于多个文件。

有关相关任务，请参阅以下指南：
- [生成文档](./guides-generating-documentation.md)
- [翻译文档](./guides-translating-documentation.md)
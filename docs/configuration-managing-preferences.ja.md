# 設定の管理

ドキュメントを生成または更新する際、`--feedback` フラグを使用してフィードバックを提供できます。このフィードバックは「設定」として保存され、将来のセッションで再利用されるため、AI が以前の指示との一貫性を保つことができます。`aigne doc prefs` コマンドは、これらの保存された設定を直接管理する方法を提供します。

このガイドでは、保存された設定のリスト表示、削除、およびアクティブ状態の切り替え方法について詳しく説明します。

## 保存された設定の表示

保存されているすべての設定を確認するには、`--list` フラグを使用します。このコマンドは、各設定をそのステータス、スコープ、一意の ID、および内容とともに表示します。

```bash
aigne doc prefs --list
```

### 出力の理解

リストは、各設定ルールに関する明確な情報を提供するためにフォーマットされています。

*   **ステータス**: 設定がアクティブか非アクティブかを示します。
    *   `🟢`: アクティブ。このルールはドキュメント生成中に適用されます。
    *   `⚪`: 非アクティブ。ルールは保存されていますが、無視されます。
*   **スコープ**: 設定が適用されるコンテキスト（例：`global`、`document`）。
*   **ID**: 設定の一意の識別子で、削除や切り替えに使用されます。
*   **Paths**: 設定が特定のファイルにのみ適用される場合、そのパスがここにリストされます。
*   **ルール内容**: 設定ルール自体のテキストです。

**出力例：**

```
# ユーザー設定

**フォーマットの説明：**
- 🟢 = アクティブな設定、⚪ = 非アクティブな設定
- [scope] = 設定のスコープ (global, structure, document, translation)
- ID = 設定の一意の識別子
- Paths = 特定のファイルパス (該当する場合)

🟢 [document] pref_a1b2c3d4e5f6a7b8 | Paths: /guides/generating-documentation.md
   具体的で検証可能な事実と情報に焦点を当ててください。測定可能または具体的な d... を提供しない、曖昧で空虚な言葉の使用は避けてください。

⚪ [global] pref_b8a7f6e5d4c3b2a1
   ドキュメント全体で、フォーマルでアカデミックなトーンを使用してください。

```

## 設定の削除

設定が不要になった場合、`--remove` フラグを使用して永久に削除できます。ID を指定するか、インタラクティブメニューを通じて設定を削除できます。

### インタラクティブモード

リストから設定を選択するには、ID を指定せずにコマンドを実行します。これによりインタラクティブなプロンプトが開き、削除したい項目をチェックできます。

```bash
aigne doc prefs --remove
```

チェックリストが表示され、1つ以上の設定を選択できます。これは、正しい項目を確実に削除するための推奨される方法です。

### 直接モード

削除したい設定の一意の ID をすでに知っている場合は、`--id` フラグを使用してそれらを指定できます。削除する項目について確信がある場合、この方法がより速いです。

```bash
# 単一の設定を削除
aigne doc prefs --remove --id pref_a1b2c3d4e5f6a7b8

# 複数の設定を削除
aigne doc prefs --remove --id pref_a1b2c3d4e5f6a7b8 --id pref_b8a7f6e5d4c3b2a1
```

## 設定の切り替え

設定を永久に削除する代わりに、一時的に有効または無効にすることができます。これは、特定のタスクのためにルールを失うことなく一時停止したい場合に便利です。`--toggle` フラグを使用して、設定のアクティブ状態を変更します。

### インタラクティブモード

ID を指定せずにコマンドを実行すると、削除コマンドと同様のインタラクティブなチェックリストが起動します。

```bash
aigne doc prefs --toggle
```

有効化または無効化したい設定を選択できます。ステータスアイコン（`🟢`/`⚪`）が更新され、新しい状態が反映されます。

### 直接モード

特定の設定を直接切り替えるには、`--id` フラグを使用します。

```bash
# 単一の設定を切り替え
aigne doc prefs --toggle --id pref_a1b2c3d4e5f6a7b8

# 複数の設定を切り替え
aigne doc prefs --toggle --id pref_a1b2c3d4e5f6a7b8 --id pref_b8a7f6e5d4c3b2a1
```

---

設定を管理することで、ドキュメント生成プロセスをきめ細かく制御し、出力がプロジェクトの特定の要件やスタイルに一貫して沿うようにすることができます。
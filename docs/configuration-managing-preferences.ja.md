# プリファレンスの管理

ドキュメントを生成または更新する際に、`--feedback` フラグを使用してフィードバックを提供できます。このフィードバックは「プリファレンス」として保存され、将来のセッションで再利用されることで、AIが以前の指示との一貫性を維持するようになります。`aigne doc prefs` コマンドは、これらの保存されたプリファレンスを直接管理する方法を提供します。

このガイドでは、保存されたプリファレンスのリスト表示、削除、およびアクティブ状態の切り替え方法について詳しく説明します。

## 保存されたプリファレンスの表示

保存されているすべてのプリファレンスを確認するには、`--list` フラグを使用します。このコマンドは、各プリファレンスをそのステータス、スコープ、一意のID、および内容とともに表示します。

```bash
aigne doc prefs --list
```

### 出力の理解

リストは、各プリファレンスルールに関する明確な情報を提供するようにフォーマットされています：

*   **ステータス**: プリファレンスがアクティブか非アクティブかを示します。
    *   `🟢`: アクティブ。ルールはドキュメント生成中に適用されます。
    *   `⚪`: 非アクティブ。ルールは保存されていますが、無視されます。
*   **スコープ**: プリファレンスが適用されるコンテキスト（例：`global`、`document`）。
*   **ID**: プリファレンスの一意の識別子で、削除や切り替えに使用されます。
*   **パス**: プリファレンスが特定のファイルにのみ適用される場合、そのパスがここにリストされます。
*   **ルール内容**: プリファレンスルール自体のテキストです。

**出力例：**

```
# ユーザープリファレンス

**フォーマットの説明：**
- 🟢 = アクティブなプリファレンス, ⚪ = 非アクティブなプリファレンス
- [scope] = プリファレンスのスコープ (global, structure, document, translation)
- ID = 一意のプリファレンス識別子
- Paths = 特定のファイルパス（該当する場合）

🟢 [document] 2af5c | Paths: /guides/generating-documentation.md
   具体的で検証可能な事実と情報に焦点を当てること。測定可能または具体的な情報を提供しない、曖昧または空虚な言葉の使用は避けること...

⚪ [global] 8b1e2
   ドキュメント全体でフォーマルかつアカデミックなトーンを使用すること。

```

## プリファレンスの削除

プリファレンスが不要になった場合、`--remove` フラグを使用して完全に削除できます。IDを指定するか、インタラクティブメニューを通じてプリファレンスを削除できます。

### インタラクティブモード

リストからプリファレンスを選択するには、IDなしでコマンドを実行します。これにより、削除したい項目をチェックできるインタラクティブなプロンプトが開きます。

```bash
aigne doc prefs --remove
```

チェックリストが表示され、1つ以上のプリファレンスを選択できます。これは、正しい項目を確実に削除するための推奨される方法です。

### ダイレクトモード

削除したいプリファレンスの一意のIDがすでにわかっている場合は、`--id` フラグを使用してそれらを指定できます。削除する項目が確かな場合は、この方法がより高速です。

```bash
# 単一のプリファレンスを削除
aigne doc prefs --remove --id 2af5c

# 複数のプリファレンスを削除
aigne doc prefs --remove --id 2af5c --id 8b1e2
```

## プリファレンスの切り替え

プリファレンスを完全に削除する代わりに、一時的に有効または無効にすることができます。これは、ルールを失うことなく特定のタスクのために一時停止したい場合に便利です。プリファレンスのアクティブ状態を変更するには、`--toggle` フラグを使用します。

### インタラクティブモード

IDなしでコマンドを実行すると、削除コマンドと同様のインタラクティブなチェックリストが起動します。

```bash
aigne doc prefs --toggle
```

有効化または無効化したいプリファレンスを選択できます。ステータスアイコン（`🟢`/`⚪`）が更新され、新しい状態が反映されます。

### ダイレクトモード

特定のプリファレンスを直接切り替えるには、`--id` フラグを使用します。

```bash
# 単一のプリファレンスを切り替え
aigne doc prefs --toggle --id 2af5c

# 複数のプリファレンスを切り替え
aigne doc prefs --toggle --id 2af5c --id 8b1e2
```

---

プリファレンスを管理することで、ドキュメント生成プロセスをきめ細かく制御し、出力がプロジェクトの特定の要件やスタイルに一貫して沿うようにすることができます。
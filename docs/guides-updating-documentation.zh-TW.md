# 更新文件

維護文件的準確性和相關性是一個持續的過程。隨著您的程式碼庫不斷演進或收到新的回饋，您將需要修改現有的文件。`update` 指令提供了一種結構化的方式，可根據新的指示重新產生特定文件，確保其保持最新狀態。

本指南將說明更新文件的兩種主要方法：用於詳細、單一文件優化的互動模式，以及一次性將變更應用於多個文件的批次模式。

## 兩種操作模式

`update` 指令根據您選擇的文件數量和提供的選項，在兩種模式之一中運作。

1.  **互動模式**：當您更新單一文件且未使用 `--reset` 旗標時觸發。此模式專為迭代優化而設計，讓您可以提供回饋、檢視變更並重複此過程，直到文件符合您的標準為止。
2.  **批次模式**：當您同時更新多個文件或使用 `--reset` 旗標時使用。此模式會在一次操作中將您的回饋應用於所有選定的文件，對於廣泛的變更而言非常有效率。

## 互動模式：優化單一文件

互動模式提供了一個受控的環境，可對單一文件進行精確的變更。當您需要根據特定回饋仔細檢視和調整內容時，這是理想的選擇。

若要啟動互動式會話，請執行 `aigne doc update` 指令並從清單中選擇單一文件。

```bash
aigne doc update
```

該工具將引導您完成以下步驟：

1.  **文件分析**：系統首先會顯示所選文件的結構大綱，展示其主要標題。
2.  **使用者操作**：接著系統會提示您選擇以下三種操作之一：
    *   **檢視文件**：顯示文件目前版本的完整內容，並在您的終端機中呈現以便於閱讀。
    *   **提供回饋**：提示您輸入修改請求。這可以是任何內容，從「新增一個關於錯誤處理的章節」到「闡明 `config` 物件的用途」。
    *   **完成**：退出互動式會話並儲存最後產生的文件版本。
3.  **內容重新產生**：在您提交回饋後，AI 會根據您的指示重新產生文件內容。然後會顯示新的標題結構。
4.  **迭代或完成**：您可以繼續這個檢視、提供回饋和重新產生的循環，直到您對結果滿意為止。一旦您選擇「完成」，此過程即告結束。

這種迭代循環可以對最終輸出進行微調控制，確保更新後的文件準確且完整。

## 批次模式：更新多個文件

當您需要將相同的通用回饋應用於多個文件或完全重新產生它們時，批次模式是為效率而設計的。如果您選擇了多個文件或使用 `--docs` 或 `--reset` 等命令列旗標，此模式將自動啟動。

### 使用特定回饋進行更新

您可以直接從命令列提供回饋來更新一個或多個文件，而無需進入互動式會話。

```bash title="使用回饋更新單一文件"
aigne doc update --docs /guides/overview.md --feedback "Add a section explaining the authentication flow"
```

```bash title="使用相同的回饋更新多個文件"
aigne doc update --docs /guides/overview.md --docs /guides/getting-started.md --feedback "Improve the clarity of all code examples"
```

### 重設與重新產生

`--reset` 旗標指示工具忽略文件的先前版本，並根據原始程式碼從頭開始重新產生它們。當程式碼中的重大變更使現有文件過時時，這非常有用。

```bash title="從頭開始重新產生特定文件"
aigne doc update --docs /guides/overview.md --reset
```

## 指令參考

`update` 指令接受數個旗標來控制其行為。

| 參數 | 說明 | 範例 |
| :--- | :--- | :--- |
| `--docs <path>` | 指定要更新的一個或多個文件路徑。可多次使用。 | `--docs /overview --docs /guides/generating-documentation` |
| `--feedback <text>` | 提供內容變更的指示。 | `--feedback "為安裝步驟新增更多細節"` |
| `--glossary <file>` | 指定一個術語表檔案，以確保在重新產生過程中術語的一致性。 | `--glossary @/path/to/glossary.md` |
| `--reset` | 一個布林旗標，強制完全重新產生所選文件，忽略其先前版本。 | `--reset` |

## 總結

`update` 指令提供了一個靈活的工作流程，讓您的文件與專案保持一致。使用互動模式對單一文件進行詳細的迭代變更，並使用批次模式有效率地將廣泛的更新應用於多個檔案。

如需相關任務，請參閱以下指南：
- [產生文件](./guides-generating-documentation.md)
- [翻譯文件](./guides-translating-documentation.md)
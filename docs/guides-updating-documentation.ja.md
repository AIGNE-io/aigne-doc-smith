# ドキュメントの更新

ドキュメントの正確性と関連性を維持することは、継続的なプロセスです。コードベースが進化したり、新しいフィードバックを受け取ったりするにつれて、既存のドキュメントを修正する必要があります。`update` コマンドは、新しい指示で特定のドキュメントを再生成するための構造化された方法を提供し、ドキュメントが常に最新の状態に保たれるようにします。

このガイドでは、ドキュメントを更新するための2つの主要な方法について説明します。1つは、詳細な単一ドキュメントの改良のためのインタラクティブモード、もう1つは、一度に複数のドキュメントに変更を適用するためのバッチモードです。

## 2つの操作モード

`update` コマンドは、選択したドキュメントの数と指定したオプションに応じて、2つのモードのいずれかで動作します。

1.  **インタラクティブモード**：`--reset` フラグなしで単一のドキュメントを更新する際にトリガーされます。このモードは、フィードバックを提供し、変更を確認し、ドキュメントが基準を満たすまでプロセスを繰り返すことができる、反復的な改良のために設計されています。
2.  **バッチモード**：複数のドキュメントを同時に更新する場合、または `--reset` フラグを使用する場合に使用されます。このモードは、フィードバックをすべての選択されたドキュメントに一度の操作で適用するため、広範な変更に効率的です。

## インタラクティブモード：単一ドキュメントの改良

インタラクティブモードは、単一のドキュメントに正確な変更を加えるための管理された環境を提供します。特定のフィードバックに基づいてコンテンツを慎重に確認し、調整する必要がある場合に最適な選択肢です。

インタラクティブセッションを開始するには、`aigne doc update` コマンドを実行し、リストから単一のドキュメントを選択します。

```bash
aigne doc update
```

ツールは以下の手順を案内します：

1.  **ドキュメント分析**：システムはまず、選択されたドキュメントの構造的なアウトラインを表示し、その主要な見出しを示します。
2.  **ユーザーアクション**：次に、3つのアクションから1つを選択するよう求められます：
    *   **ドキュメントを表示**：ドキュメントの現在のバージョンの全内容をターミナルにレンダリングして表示し、簡単に読めるようにします。
    *   **フィードバックを提供**：「エラーハンドリングに関するセクションを追加してください」から「`config` オブジェクトの目的を明確にしてください」まで、変更リクエストを入力するよう求められます。
    *   **完了**：インタラクティブセッションを終了し、最後に生成されたバージョンのドキュメントを保存します。
3.  **コンテンツの再生成**：フィードバックを送信すると、AIがあなたの指示に基づいてドキュメントのコンテンツを再生成します。その後、新しい見出し構造が表示されます。
4.  **反復または終了**：結果に満足するまで、表示、フィードバック提供、再生成のこのループを続けることができます。「完了」を選択すると、プロセスは完了です。

この反復的なサイクルにより、最終的な出力に対してきめ細かな制御が可能になり、更新されたドキュメントが正確で完全なものになることが保証されます。

## バッチモード：複数ドキュメントの更新

バッチモードは、同じ一般的なフィードバックを複数のドキュメントに適用したり、それらを完全に再生成したりする必要がある場合に効率的に設計されています。このモードは、複数のドキュメントを選択した場合や、`--docs` や `--reset` のようなコマンドラインフラグを使用した場合に自動的に有効になります。

### 特定のフィードバックによる更新

インタラクティブセッションに入ることなく、コマンドラインから直接フィードバックを提供して、1つ以上のドキュメントを更新できます。

```bash title="フィードバックを付けて単一のドキュメントを更新"
aigne doc update --docs /guides/overview.md --feedback "Add a section explaining the authentication flow"
```

```bash title="同じフィードバックで複数のドキュメントを更新"
aigne doc update --docs /guides/overview.md --docs /guides/getting-started.md --feedback "Improve the clarity of all code examples"
```

### リセットと再生成

`--reset` フラグは、ドキュメントの以前のバージョンを無視し、ソースコードに基づいて最初から再生成するようにツールに指示します。これは、コードの大幅な変更により既存のドキュメントが陳腐化した場合に便利です。

```bash title="特定のドキュメントを最初から再生成"
aigne doc update --docs /guides/overview.md --reset
```

## コマンドリファレンス

`update` コマンドは、その動作を制御するためにいくつかのフラグを受け入れます。

| パラメータ | 説明 | 例 |
| :--- | :--- | :--- |
| `--docs <path>` | 更新する1つ以上のドキュメントパスを指定します。複数回使用できます。 | `--docs /overview --docs /guides/generating-documentation` |
| `--feedback <text>` | コンテンツの変更点を指示します。 | `--feedback "Add more detail to the installation steps"` |
| `--glossary <file>` | 再生成時に一貫した用語を確保するために、用語集ファイルを指定します。 | `--glossary @/path/to/glossary.md` |
| `--reset` | 選択したドキュメントの以前のバージョンを無視して、完全な再生成を強制するブール値フラグ。 | `--reset` |

## まとめ

`update` コマンドは、ドキュメントをプロジェクトと整合性を保つための柔軟なワークフローを提供します。単一ドキュメントの詳細な反復的な変更にはインタラクティブモードを使用し、複数のファイルにわたる広範な更新を効率的に適用するにはバッチモードを使用してください。

関連タスクについては、以下のガイドを参照してください：
- [ドキュメントの生成](./guides-generating-documentation.md)
- [ドキュメントの翻訳](./guides-translating-documentation.md)
# ドキュメントの更新

ドキュメントの正確性と関連性を維持することは、継続的なプロセスです。コードベースが進化したり、新しいフィードバックを受け取ったりするにつれて、既存のドキュメントを修正する必要があります。`update` コマンドは、新しい指示で特定のドキュメントを再生成するための構造化された方法を提供し、ドキュメントを最新の状態に保ちます。

このガイドでは、ドキュメントを更新するための2つの主要な方法について説明します。1つは、単一ドキュメントの詳細な改良を行うための対話モード、もう1つは、複数のドキュメントに一度に変更を適用するためのバッチモードです。

## 2つの動作モード

`update` コマンドは、選択したドキュメントの数と指定したオプションに応じて、2つのモードのいずれかで動作します。

1.  **対話モード**: `--reset` フラグなしで単一のドキュメントを更新する際にトリガーされます。このモードは反復的な改良のために設計されており、フィードバックを提供し、変更を確認し、ドキュメントが基準を満たすまでプロセスを繰り返すことができます。
2.  **バッチモード**: 複数のドキュメントを同時に更新する場合、または `--reset` フラグを使用する場合に使用されます。このモードは、1回の操作で選択したすべてのドキュメントにフィードバックを適用するため、広範な変更に効率的です。

## 対話モード: 単一ドキュメントの改良

対話モードは、単一のドキュメントに正確な変更を加えるための制御された環境を提供します。特定のフィードバックに基づいてコンテンツを慎重に確認し、調整する必要がある場合に最適な選択肢です。

対話セッションを開始するには、`aigne doc update` コマンドを実行し、リストから単一のドキュメントを選択します。

```bash
aigne doc update
```

ツールは次の手順であなたをガイドします:

1.  **ドキュメント分析**: システムはまず、選択されたドキュメントの構造的なアウトラインを表示し、その主要な見出しを示します。
2.  **ユーザーアクション**: 次に、3つのアクションのうち1つを選択するよう求められます:
    *   **ドキュメントの表示**: ドキュメントの現行バージョンの全内容をターミナルにレンダリングして表示し、読みやすくします。
    *   **フィードバックの提供**: 修正リクエストを入力するよう求められます。これは、「エラー処理に関するセクションを追加してください」から「`config` オブジェクトの目的を明確にしてください」まで、何でもかまいません。
    *   **完了**: 対話セッションを終了し、最後に生成されたバージョンのドキュメントを保存します。
3.  **コンテンツの再生成**: フィードバックを送信すると、AIがあなたの指示に基づいてドキュメントのコンテンツを再生成します。その後、新しい見出し構造が表示されます。
4.  **反復または終了**: 結果に満足するまで、表示、フィードバックの提供、再生成のループを続けることができます。「完了」を選択すると、プロセスは終了です。

この反復的なサイクルにより、最終的な出力を微調整でき、更新されたドキュメントが正確かつ完全であることが保証されます。

## バッチモード: 複数ドキュメントの更新

バッチモードは、複数のドキュメントに同じ一般的なフィードバックを適用したり、それらを完全に再生成したりする必要がある場合に、効率性を考慮して設計されています。このモードは、複数のドキュメントを選択した場合、または `--docs` や `--reset` のようなコマンドラインフラグを使用した場合に自動的に有効になります。

### 特定のフィードバックによる更新

対話セッションに入ることなく、コマンドラインから直接フィードバックを提供して、1つまたは複数のドキュメントを更新できます。

```bash title="フィードバック付きで単一ドキュメントを更新"
aigne doc update --docs overview.md --feedback "Add a section explaining the authentication flow"
```

```bash title="複数のドキュメントを同じフィードバックで更新"
aigne doc update --docs overview.md --docs guides-getting-started.md --feedback "Improve the clarity of all code examples"
```

### リセットと再生成

`--reset` フラグは、ツールにドキュメントの以前のバージョンを無視し、ソースコードに基づいてゼロから再生成するよう指示します。これは、コードの大幅な変更によって既存のドキュメントが時代遅れになった場合に便利です。

```bash title="特定のドキュメントをゼロから再生成"
aigne doc update --docs overview.md --reset
```

## コマンドリファレンス

`update` コマンドは、その動作を制御するためのいくつかのフラグを受け入れます。

| パラメータ | 説明 | 例 |
| :--- | :--- | :--- |
| `--docs <path>` | 更新する1つまたは複数のドキュメントパスを指定します。複数回使用できます。 | `--docs overview.md --docs guides-generating-documentation.md` |
| `--feedback <text>` | コンテンツで何を変更するかについての指示を提供します。 | `--feedback "インストール手順に詳細を追加してください"` |
| `--glossary <file>` | 再生成時に一貫した用語を保証するために、用語集ファイルを指定します。 | `--glossary @/path/to/glossary.md` |
| `--reset` | 選択したドキュメントの以前のバージョンを無視して、完全な再生成を強制するブール型フラグです。 | `--reset` |

## 概要

`update` コマンドは、ドキュメントをプロジェクトと整合性を保つための柔軟なワークフローを提供します。単一ドキュメントの詳細で反復的な変更には対話モードを、複数のファイルにわたる広範な更新を効率的に適用するにはバッチモードを使用してください。

関連タスクについては、以下のガイドを参照してください:
- [ドキュメントの生成](./guides-generating-documentation.md)
- [ドキュメントの翻訳](./guides-translating-documentation.md)
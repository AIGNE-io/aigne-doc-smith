type: ai
name: updateDocumentDetail
description: Update and optimize document content based on user feedback using diff patches
instructions:
  - role: system
    url: ../../prompts/detail/update/system-prompt.md
  - role: user
    url: ../../prompts/detail/update/user-prompt.md

input_schema:
  type: object
  properties:
    originalContent:
      type: string
      description: Original markdown content to be updated
    feedback:
      type: string
      description: User feedback for content improvements
    rules:
      type: string
      description: User configuration rules
    locale:
      type: string
      description: User language, e.g. zh, en
    datasources:
      type: string
      description: Context for document content
    glossary:
      type: string
      description: Glossary of terms
    userPreferences:
      type: string
      description: User's saved preferences for content and documentation style
    targetAudience:
      type: string
      description: Target audience for the documentation
    title:
      type: string
      description: Document title
    description:
      type: string
      description: Document description
  required:
    - originalContent
    - feedback
output_key: message
afs:
  modules:
    - module: system-fs
      options:
        mount: /sources
        path: .
        description: |
          Codebase of the project to be documented used as context for document generation,
          should search and read as needed while generating document content
skills:
  - ./document-tools/update-document-content.mjs
  # NOTE: Use AFS skills to read files from the codebase as context
  # - ./fs-tools/glob.mjs
  # - ./fs-tools/grep.mjs
  # - ./fs-tools/read-file.mjs
task_render_mode: collapse

type: team
task_render_mode: collapse
name: generateDiagram
skills:
  # Step 1: Analyze document content to determine diagram type and style
  - ../create/analyze-diagram-type.mjs
  # Step 2: Generate diagram image based on type and style
  - ../create/generate-diagram-image.yaml
  # Step 3: Replace placeholder with generated image
  - ../create/replace-d2-with-image.mjs
input_schema:
  type: object
  properties:
    documentContent:
      type: string
      description: The **raw text content** of the current document. (**Note:** This is the original document and **does not include** any diagram source code.)
    locale:
      type: string
      description: Language for diagram labels and text
      default: en
    diagramming:
      type: object
      description: Diagramming configuration including available styles
      properties:
        styles:
          type: array
          description: Available diagram styles configured by user
          items:
            type: string
        types:
          type: array
          description: Supported diagram types (optional, for reference)
          items:
            type: string
    feedback:
      type: string
      description: User feedback that may contain style or type preferences (e.g., 'use anthropomorphic style', 'create architecture diagram')
      default: ""
  required:
    - documentContent
output_schema:
  type: object
  properties:
    content:
      type: string
      description: The document content with D2 code blocks replaced by generated diagram image.
  required:
    - content

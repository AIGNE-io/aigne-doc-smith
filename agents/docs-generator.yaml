type: team
name: generator
description: 文档生成
skills:
  - ./load-sources.mjs
  - ./check-structure-planning.mjs
  - type: transform
    jsonata: |
      $merge([$, {
      "saveKey": "structurePlan",
      "savePath": outputDir,
      "fileName": "structure-plan.json"
      }])
  - ./save-output.mjs
  - type: transform
    jsonata: |
      $merge([
        $,
        {
          'structurePlanResult': $map(structurePlan, function($item) {
            $merge([
              $item,
              {
                'translates': [$map(translateLanguages, function($lang) { {"language": $lang} })]
              }
            ])
          })
        }
      ])
  - ./batch-docs-detail-generator.yaml
  - ./save-docs.mjs

input_schema:
  type: object
  properties:
    nodeName:
      type: string
      description: 节点名称
      default: 部分
    rules:
      type: string
      description: 用户的结构规划的要求和规则
    locale:
      type: string
      description: 用户语言，如 zh、en
    sources:
      type: array
      items:
        type: string
      description: 用户生成文档的源码文件
    sourcesPath:
      type: array
      items:
        type: string
        description: 源码路径
      default:
        - ./
    docsDir:
      type: string
      description: 文档保存目录
      default: ./aigne-docs/docs
    outputDir:
      type: string
      description: 输出目录
      default: ./aigne-docs/output
    translateLanguages:
      type: array
      items:
        type: string
        description: 翻译语言，如 zh、en
    glossary:
      type: string
      description: 术语表
    additionalInformation:
      type: string
      description: 额外补充信息
    docsType:
      type: string
      description: 文档类型，支持：general、getting-started、reference、faq
      default: general
    structurePlanFeedback:
      type: string
      description: 结构规划反馈
  required:
    - rules
    - docsDir
mode: sequential

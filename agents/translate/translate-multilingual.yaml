type: team
name: translateMultilingual
description: Batch translate documents to multiple languages
skills:
  - type: team
    task_render_mode: collapse
    name: translate
    skills:
      - url: ../utils/find-user-preferences-by-path.mjs
        default_input:
          scope: translation
      - ../translate/translate-document.yaml
      - type: transform
        jsonata: |
          $merge([
            $,
            { "reviewContent": translation }
          ])
    reflection:
      reviewer: ../utils/check-detail-result.mjs
      is_approved: isApproved
      max_iterations: 5
      return_last_on_max_iterations: true
    task_title: Translate '{{ title }}' to '{{ language }}'
  - ../utils/save-doc-translation.mjs
input_schema:
  type: object
  properties:
    translates:
      type: array
      items:
        type: object
        properties:
          language:
            type: string
    content:
      type: string
output_schema:
  type: object
  properties:
    translates:
      type: array
      items:
        type: object
        properties:
          language:
            type: string
          translation:
            type: string
iterate_on: translates
concurrency: 3

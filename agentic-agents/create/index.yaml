type: team
name: DocSmith
alias:
  - run
description: DocSmith entry point for documentation generation, editing, and translation
input_schema:
  type: object
  properties:
    message:
      type: string
      description: User feedback describing what documentation tasks to perform (natural language)
    changeset:
      type: string
      description: 通过 Changeset 描述一批希望执行的变更
  required: []
default_input:
  workspace: /modules/workspace
  doc_smith_workspace: /modules/doc-smith
  document_structure_path: /modules/doc-smith/output/document-structure.yaml

skills:
  - url: ../../agents/init/index.mjs
    default_input:
      skipIfExists: true
  - ./set-custom-prompt.mjs
  - type: "@aigne/agent-library/orchestrator"
    objective:
      url: objective.md

    planner:
      type: ai
      # model: anthropic/claude-opus-4-5
      instructions:
        url: ../common/planner.md
      input_schema:
        type: object
        properties:
          workspace:
            type: string
            description: The workspace path
          doc_smith_workspace:
            type: string
            description: The Doc Smith workspace path
          document_structure_path:
            type: string
            description: The document structure path
          customPlannerPrompt:
            type: string
            description: The custom planner prompt
          domainKnowledge:
            type: string
            description: The domain knowledge

    worker:
      type: ai
      # model: gemini-3-pro-preview
      instructions:
        url: ../common/worker.md
      input_schema:
        type: object
        properties:
          workspace:
            type: string
            description: The workspace path
          doc_smith_workspace:
            type: string
            description: The Doc Smith workspace path
          domainKnowledge:
            type: string
            description: The domain knowledge
          document_structure_path:
            type: string
            description: The document structure path
      # skills:
      #   - ../structure/index.yaml
      #   - ../detail/index.yaml

    completer:
      type: ai
      instructions:
        url: ../common/completer.md
      input_schema:
        type: object
        properties:
          workspace:
            type: string
            description: The workspace path
          doc_smith_workspace:
            type: string
            description: The Doc Smith workspace path
          document_structure_path:
            type: string
            description: The document structure path

    state_management:
      max_iterations: 50
      max_tokens: 200000
      keep_recent: 30

    # shareAfs: true
    afs:
      # storage:
      #   url: .afs
      modules:
        - module: local-fs
          options:
            name: doc-smith
            localPath: .aigne/doc-smith
            description: The Doc Smith workspace for storing intermediate and output files
        - module: local-fs
          options:
            name: workspace
            localPath: .
            description: The target repository containing source code and documentation. Read-only, cannot be modified.
            ignore:
              - ".git"
              - ".aigne"
              - "DOCSMITH.md"
              - "DOC-SMITH.md"
      context:
        search:
          presets:
            predict-resources:
              select:
                agent: "../predict-resources/index.yaml"
      # drivers:
      #   - driver: i18n
      #     options:
      #       defaultSourceLanguage: zh
